import vk_api
from vk_api.longpoll import VkLongPoll, VkEventType
from random import randint
import os
from dotenv import load_dotenv

load_dotenv()
token = os.environ.get('TOKEN')

d = {0: '–∞–Ω–≥–µ–ª—å—Å–∫–∞—è', 1: '–±–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è', 2: '–±–µ–∑—É–ø—Ä–µ—á–Ω–∞—è', 3: '–±–µ—Å–ø–æ–¥–æ–±–Ω–∞—è', 4: '–±–µ—Å–∫–æ—Ä—ã—Å—Ç–Ω–∞—è', 5: '–≤–µ—Å—ë–ª–∞—è', 6: '–≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω–∞—è', 7: '–≤–æ—Å—Ö–∏—Ç–∏—Ç–µ–ª—å–Ω–∞—è',
     8: '–≤–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è', 9: '–≤–æ–∑–±—É–∂–¥–∞—é—â–∞—è', 10: '–≥—Ä–∞—Ü–∏–æ–∑–Ω–∞—è', 11: '–¥–æ–±—Ä–∞—è', 12: '–¥—É—à–µ–≤–Ω–∞—è', 13: '–¥—Ä—É–∂–µ–ª—é–±–Ω–∞—è', 14: '–¥–∏–≤–Ω–∞—è', 15: '–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è',
     16: '–∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è', 17: '–∂–µ–ª–∞–Ω–Ω–∞—è', 18: '–∂–∏–∑–Ω–µ—Ä–∞–¥–æ—Å—Ç–Ω–∞—è', 19: '–∑–∞–±–æ—Ç–ª–∏–≤–∞—è', 20: '–∑–∞–≤–æ—Ä–∞–∂–∏–≤–∞—é—â–∞—è', 21: '–∑–∞–≥–∞–¥–æ—á–Ω–∞—è', 22: '–∑–∞–º–∞–Ω—á–∏–≤–∞—è',
     23: '–∑–∞—Å—Ç–µ–Ω—á–∏–≤–∞—è', 24: '–∑–∞–∂–∏–≥–∞—Ç–µ–ª—å–Ω–∞—è', 25: '–∏–∑—ã—Å–∫–∞–Ω–Ω–∞—è', 26: '–∏–Ω—Ç—Ä–∏–≥—É—é—â–∞—è', 27: '–∏—Å–∫—Ä–µ–Ω–Ω—è—è', 28: '–∏—Å–∫—Ä–æ–º—ë—Ç–Ω–∞—è', 29: '–∏–≥—Ä–∏–≤–∞—è',
     30: '–∏–∑—É–º–∏—Ç–µ–ª—å–Ω–∞—è', 31: '–∫—Ä–∞—Å–∏–≤–∞—è', 32: '–∫–ª–∞—Å—Å–Ω–∞—è', 33: '–∫–æ–∫–µ—Ç–ª–∏–≤–∞—è', 34: '–∫—Ä–µ–∞—Ç–∏–≤–Ω–∞—è', 35: '–∫–æ–º–º—É–Ω–∏–∫–∞–±–µ–ª—å–Ω–∞—è', 36: '–ª—É—á–µ–∑–∞—Ä–Ω–∞—è',
     37: '–ª–∞—Å–∫–æ–≤–∞—è', 38: '–ª—É—á—à–∞—è', 39: '–ª–µ–≥–∫–∞—è', 40: '–º–∏–ª–∞—è', 41: '–º–µ—á—Ç–∞—Ç–µ–ª—å–Ω–∞—è', 42: '–º–∞–Ω—è—â–∞—è', 43: '–º–∏–Ω–∏–∞—Ç—é—Ä–Ω–∞—è', 44: '–Ω–µ–∂–Ω–∞—è',
     45: '–Ω–µ–ø–æ–≤—Ç–æ—Ä–∏–º–∞—è', 46: '–Ω–µ–∑–∞–±—ã–≤–∞–µ–º–∞—è', 47: '–Ω–µ–æ—Ç—Ä–∞–∑–∏–º–∞—è', 48: '–Ω–µ–≤–æ–æ–±—Ä–∞–∑–∏–º–∞—è', 49: '–Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è', 50: '–Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è',
     51: '–Ω–µ–Ω–∞–≥–ª—è–¥–Ω–∞—è', 52: '–Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è', 53: '–æ–±–∞–ª–¥–µ–Ω–Ω–∞—è', 54: '–æ—Ç–∑—ã–≤—á–∏–≤–∞—è', 55: '–æ—Å–ª–µ–ø–∏—Ç–µ–ª—å–Ω–∞—è', 56: '–æ–±–æ–ª—å—Å—Ç–∏—Ç–µ–ª—å–Ω–∞—è',
     57: '–æ—á–∞—Ä–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è', 58: '–æ–±–≤–æ—Ä–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è', 59: '–æ–¥—É—Ä–º–∞–Ω–∏–≤–∞—é—â–∞—è', 60: '–æ–±–∞—è—Ç–µ–ª—å–Ω–∞—è', 61: '–ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è', 62: '–ø–æ–Ω–∏–º–∞—é—â–∞—è',
     63: '–ø—Ä–µ–ª–µ—Å—Ç–Ω–∞—è', 64: '—Ä–æ–º–∞–Ω—Ç–∏—á–Ω–∞—è', 65: '—Ä–∞–∑–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è', 66: '—Å–∞–º–∞—è-—Å–∞–º–∞—è', 67: '—Å–∫–∞–∑–æ—á–Ω–∞—è', 68: '—Å—Ç—Ä–∞—Å—Ç–Ω–∞—è', 69: '—Å—Ç–∏–ª—å–Ω–∞—è',
     70: '—Å–Ω–æ–≥—Å—à–∏–±–∞—Ç–µ–ª—å–Ω–∞—è', 71: '—Å—Ç—Ä–æ–π–Ω–∞—è', 72: '—Å–æ–±–ª–∞–∑–Ω–∏—Ç–µ–ª—å–Ω–∞—è', 73: '—Å–ª–∞–¥–∫–∞—è', 74: '—Å–∏–º–ø–∞—Ç–∏—á–Ω–∞—è', 75: '—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–∞—è', 76: '—Å–∫—Ä–æ–º–Ω–∞—è', 77: '—Ç–∞–∫—Ç–∏—á–Ω–∞—è',
     78: '—Ç–∞–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è', 79: '—Ç—Ä–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è', 80: '—É–º–æ–ø–æ–º—Ä–∞—á–∏—Ç–µ–ª—å–Ω–∞—è', 81: '—É–º–Ω–µ–Ω—å–∫–∞—è', 82: '—É—Ç–æ–Ω—á—ë–Ω–Ω–∞—è', 83: '—É–ª—ã–±—á–∏–≤–∞—è', 84: '—Ñ–µ–µ—Ä–∏—á–µ—Å–∫–∞—è',
     85: '—Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∞—è', 86: '—á–µ—Å—Ç–Ω–∞—è', 87: '—á–∏—Å—Ç–æ—Å–µ—Ä–¥–µ—á–Ω–∞—è', 88: '—á—É–¥–µ—Å–Ω–∞—è', 89: '—á–∞—Ä—É—é—â–∞—è', 90: '—Ü–µ–ª–µ—É—Å—Ç—Ä–µ–º–ª—ë–Ω–Ω–∞—è', 91: '—à–∏–∫–∞—Ä–Ω–∞—è',
     92: '—ç–Ω–µ—Ä–≥–∏—á–Ω–∞—è', 93: '—è—Ä–∫–∞—è', 94: '–∞–ø–ø–µ—Ç–∏—Ç–Ω–∞—è', 95: '–ø—Ä–∏—Ç—è–≥–∞—Ç–µ–ª—å–Ω–∞—è', 96: '—Å–µ–∫—Å—É–∞–ª—å–Ω–∞—è', 97: '—Å–µ—Ä–¥–µ—á–Ω–∞—è', 98: '—É—é—Ç–Ω–∞—è', 99: '—á—É–¥–Ω–∞—è'}


def get_eva_status(user_id):
    status = vk.friends.getOnline()
    print(status)
    if user_id in status:
        return True
    else:
        return False

vk_session = vk_api.VkApi(token=token)
vk = vk_session.get_api()
flag = False
longpoll = VkLongPoll(vk_session)

id = 480878879

for event in longpoll.listen():
    if event.type == VkEventType.USER_ONLINE:
        if get_eva_status(id) and not flag:
            flag = True
            vk.messages.send(user_id=id, random_id=randint(366, 777), message='–î–æ–±—Ä–æ–µ —É—Ç–ª–æ–æ–æ–æ–æ‚ù§‚ù§‚ù§‚ù§‚ù§, –ï–≤–æ—á–∫–∞\n–í—Å—Ç–∞–µ—ë—à—å –≤ 6 —É—Ç—Ä–∞, –±–ª–∏–Ω, –ø–æ–Ω–∏–º–∞—é, –∫–æ—à–º–∞—Ä —Å–ª–æ–∂–Ω–æ.'
                                                                                     '–ê —è –≤–æ—Ç –≤–æ–æ–±—â–µ –Ω–µ —Å–ø–ª—é, –ø—Ä–µ–¥—Å—Ç–∞–≤—å –º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –í–æ–∑—å–º–∏ —à–æ–∫–æ–ª–∞–¥–∫–∏ —Å–æ–±–æ–π, '
                                                                                     '—Å—ä–µ—à—å —Ç–∞–º, –≤–¥—Ä—É–≥ –ø—Ä–æ–≥–æ–ª–æ–¥–∞–µ—à—å—Å—è. –ú—ã —Å –î–∞–≤–∏–¥–æ–º –∫–æ–µ-—á—Ç–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–ª–∏ –¥–ª—è —Ç–µ–±—è\n'
                                                                                     '–û—Ç–ø—Ä–∞–≤—å –±—É–∫–≤—É –æ—Ç 0 –¥–æ 99, –ø–æ–¥ –≤—Å–µ–º–∏ —Ü–∏—Ñ—Ä–∞–º–∏ —Å–ø—Ä—è—Ç–∞–Ω—ã —Å–ª–æ–≤–∞, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–µ —Ç–µ–±—è\n'
                                                                                     '–†–∞–∑–≤–ª–µ–∫–∞–π—Å—è, —Å–æ–ª–Ω—ã—à–∫–æ, –≤—Å—ë, —è —Å–ø–∞—Ç–µ–Ω—å–∫–∏'
                                                                                     '\n–° –ª—é–±–æ–≤—å—é, —Ç–≤–æ–π —Ä–æ–±–æ—Çü§ñüíò')
    if event.type == VkEventType.MESSAGE_NEW and event.to_me:
        if event.user_id == id:
            if str(event.message).isdigit():
                string = '–ï–≤–æ—á–∫–∞, —Ç—ã {}'.format(d[int(event.message)])
                vk.messages.send(user_id=id, random_id=randint(366, 777), message=string)